webpackJsonp([1],{"h/hZ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("M4fF"),o=a.n(l),r=a("PJh5"),i=a.n(r),n={data:function(){return{params:{pagination:{pageNo:1,pageSize:20,totalCount:1},query:{appName:"",appId:""}},addFormVisible:!1,formLabelWidth:"120px",appInfo:{id:"",appName:"",appId:"",appKey:"",description:"",appStatus:1},roleInfo:{id:"",appName:"",appId:"",appKey:"",description:"",appStatus:1,roleName:"",roleCode:"",resultJson:"",callBackUrl:""},statusList:[{value:"",label:"全部"},{value:1,label:"可用"},{value:0,label:"禁用"}],allResource:[],resourceList:[{id:"11",appName:"游戏交易平台",appKey:"1jfudh8e",description:"",appStatus:1,roleName:"返回默认热门商品",roleCode:"GAMETRADE_ROLE",resultJson:"",callBackUrl:"http://commdity.17173.com/commdity/list.do?recomd=true",createTime:1488792177e3}],loading:!1}},computed:{queryCondition:function(){var e=o.a.assign({},this.params.pagination);return e=o.a.assign(e,this.params.query)},dialogTitle:function(){return"添加规则"},leftSpan:function(){return 1===this.params.query.accountType?10:13}},mounted:function(){this.fetchList()},attached:function(){},methods:{formatDate:function(e,t){return i()(e[t.property]).format("YYYY-MM-DD HH:mm")},formatStatus:function(e,t){return 1===e[t.property]?"可用":"禁用"},handleSizeChange:function(e){this.params.pagination.pageSize=e,this.fetchList()},handleCurrentChange:function(e){this.params.pagination.pageNo=e,this.fetchList()},addApp:function(){this.appInfo={id:"",appName:"",appId:"",appKey:"",description:"",appStatus:1},this.addFormVisible=!0},editApp:function(e){this.addFormVisible=!0,this.appInfo=e,this.roleInfo=e},save:function(){var e=this;this.$http.post("admin/app/save",this.appInfo).then(function(t){e.$message("保存成功"),e.fetchList(),e.addFormVisible=!1})},fetchList:function(){var e=this;this.$http.get("admin/app/roleList",{params:this.queryCondition}).then(function(t){e.resourceList=t.data.data.listData,e.params.pagination.totalCount=t.data.data.totalCount},function(e){console.log(e)})}},components:{}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("系统接入")]),e._v(" "),a("el-breadcrumb-item",[e._v("冷启动规则")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-form",{attrs:{inline:!0}},[a("div",{staticClass:"queryForm"},[a("el-form-item",[a("el-input",{attrs:{placeholder:"应用名称"},model:{value:e.params.query.appName,callback:function(t){e.$set(e.params.query,"appName",t)},expression:"params.query.appName"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"应用ID"},model:{value:e.params.query.appId,callback:function(t){e.$set(e.params.query,"appId",t)},expression:"params.query.appId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{nativeOn:{click:function(t){return t.preventDefault(),e.fetchList(t)}}},[a("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),e._v("\n            查询\n          ")])],1)],1),e._v(" "),a("div",{staticClass:"addOperate"},[a("el-button",{nativeOn:{click:function(t){return t.preventDefault(),e.addApp(t)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e._v("\n          添加规则\n        ")])],1)])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resourceList,stripe:"",border:""}},[a("el-table-column",{attrs:{property:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{property:"appName",label:"应用名称"}}),e._v(" "),a("el-table-column",{attrs:{property:"roleName",label:"规则名称"}}),e._v(" "),a("el-table-column",{attrs:{property:"roleCode",label:"规则编码"}}),e._v(" "),a("el-table-column",{attrs:{property:"callBackUrl",label:"回调地址"}}),e._v(" "),a("el-table-column",{attrs:{property:"resultJson",label:"固定返回值"}}),e._v(" "),a("el-table-column",{attrs:{property:"description",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{property:"createTime",label:"创建时间",formatter:e.formatDate}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){a.preventDefault(),e.editApp(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"page-block"},[a("el-pagination",{attrs:{"current-page":e.params.pagination.pageNo,"page-sizes":[20,50,100,200],"page-size":e.params.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.params.pagination.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.roleInfo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"应用名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:""!==e.roleInfo.id},model:{value:e.roleInfo.appName,callback:function(t){e.$set(e.roleInfo,"appName",t)},expression:"roleInfo.appName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"appId","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:""!==e.roleInfo.id},model:{value:e.roleInfo.appKey,callback:function(t){e.$set(e.roleInfo,"appKey",t)},expression:"roleInfo.appKey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规则名称","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.roleInfo.roleName,callback:function(t){e.$set(e.roleInfo,"roleName",t)},expression:"roleInfo.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规则编码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:""!==e.roleInfo.id},model:{value:e.roleInfo.roleCode,callback:function(t){e.$set(e.roleInfo,"roleCode",t)},expression:"roleInfo.roleCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"回调地址","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.roleInfo.callBackUrl,callback:function(t){e.$set(e.roleInfo,"callBackUrl",t)},expression:"roleInfo.callBackUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"固定返回值","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.roleInfo.resultJson,callback:function(t){e.$set(e.roleInfo,"resultJson",t)},expression:"roleInfo.resultJson"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规则描述","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.roleInfo.description,callback:function(t){e.$set(e.roleInfo,"description",t)},expression:"roleInfo.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(n,s,!1,function(e){a("ulnz")},"data-v-df0d99b6",null);t.default=p.exports},ulnz:function(e,t){}});
//# sourceMappingURL=1.a82c3b66a975bde6e600.js.map